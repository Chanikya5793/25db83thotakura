extends layout

block content
  h1 Create Costume
  .form-shell
    form#CostumeForm(action="/resource/costumes", method="POST")
      .form-group
        label(for='costume_type') Costume type
        input#costume_type(type='text', name='costume_type', required)
      .form-group
        label(for='size') Costume size
        input#size(type='text', name='size', required)
      .form-group
        label(for='color') Costume color
        input#color(type='text', name='color')
      .form-group
        label(for='cost') Costume cost ($)
        input#cost(type='number', name='cost', step='0.01', required)
      .costume-actions
        button.btn.btn-primary(type='submit') Create costume
        a.btn.btn-secondary(href='/costumes') Cancel
  script.
    document.forms['CostumeForm'].addEventListener('submit', (event) => {
      event.preventDefault();
      fetch(event.target.action, {
        method: 'POST',
        body: new URLSearchParams(new FormData(event.target))
      }).then((resp) => {
        if(!resp.ok){
          throw new Error('Request failed with status ' + resp.status);
        }
        return resp.json();
      }).then((body) => {
        alert("Save succeeded");
        window.location.href = '/costumes';
      }).catch((error) => {
        alert("Save failed " + error);
      });
    });
