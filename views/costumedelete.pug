extends layout

block content
  h1 Delete Costume
  if toShow
    - const costumeid = toShow._id
    - const costume_type = toShow.costume_type
    - const costumecost = toShow.cost
    - const costumesize = toShow.size
    - const costumecolor = toShow.color || '—'
    .detail-card
      h2 Are you sure you want to delete “#{costume_type}”?
      .detail-row
        span.costumeAttr ID
        span #{costumeid}
      .detail-row
        span.costumeAttr Size
        span #{costumesize}
      .detail-row
        span.costumeAttr Color
        span #{costumecolor}
      .detail-row
        span.costumeAttr Cost
        span $#{costumecost}
      .costume-actions
        button.btn.btn-danger(type='button', id='deleteButton') Delete
        button.btn.btn-secondary(type='button', id='cancelButton') Cancel
    script.
      const deleteBtn = document.getElementById('deleteButton');
      const cancelBtn = document.getElementById('cancelButton');
      deleteBtn.addEventListener('click', () => {
        fetch(`/resource/costumes/${toShow._id}`, {
          method: 'DELETE'
        }).then(resp => {
          if(!resp.ok){
            throw new Error('Request failed with status ' + resp.status);
          }
          return resp.json();
        }).then(() => {
          alert('Delete succeeded');
          window.location.href = '/costumes';
        }).catch(err => {
          alert('Delete failed ' + err);
        });
      });
      cancelBtn.addEventListener('click', () => {
        window.location.href = '/costumes';
      });
  else
    .alert No costume found for the given id.
    button.btn.btn-secondary(type='button', onclick="window.location.href='/costumes'") Go Back
